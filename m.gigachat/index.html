<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>gigaCHAT</title>
  <link id="themeStylesheet" rel="stylesheet" href="m.whatsapp.css">
  <link rel="icon" type="image/x-icon" href="thumbnail.png">
  <script type="text/javascript" src="website2.js"></script>
  <script src="client.js"></script>
  <link rel="manifest" href="manifest.json">
  <!--//usually width= 420px
  //usually height= 800px-->
</head>
<body>
  <nav id="nav">
    <section id="headlineLogo">
    <img src="thumbnail.png" id="logo-big">
    <div class="space" style="width: 12px;"></div>
    <p onclick="reloadPage()" class="headline">gigaCHAT</p>
    </section>
    <section>
      
      <button id="changeTheme">Theme</button>
      <button id="logout" onclick="logout()">Logout</button>
      <button id="addNewBtn" onclick="addNew()">+</button>
    </section>
  </nav>
  <main id="main">
    <div class="one" id="one">


      <input type="text" class="text-input" id="search-box" placeholder="Search ....">
      <div id="searchIconCon" onclick="openSearch()"><img src="search.svg" alt="searchIcon" id="searchIcon"></div>
      <div id="closeIconCon"><img src="close.svg" alt="closeIcon" id="closeIcon" onclick="closeSearch()"></div>
      <div class="chat-box" style="font-style: italic;">loading ....</div>
      <div class="chat-box" style="font-style: italic;">loading ....</div>
      <div class="chat-box" style="font-style: italic;">loading ....</div>
      <div class="chat-box" style="font-style: italic;">loading ....</div>
      <div class="chat-box" style="font-style: italic;">loading ....</div>
      <div class="chat-box" style="font-style: italic;">loading ....</div>

    </div>

      <div class="text-input-con">
      <input type="text" class="text-input" id="text_input" placeholder="Message ....">

      <button type="button" id="startVoiceMsg" onclick="startVoiceMsg()">
          <img src="microphone.png" alt="send" id="microphoneIcon"></button>


      <button type="button" id="uploadMedia" onclick="uploadMediaDialog()">
        <img src="upload.png" alt="upload" id="uploadIcon"></button>

        <button type="button" id="send-msg" onclick="send_msg()">
          <img src="send.png" alt="send" id="sendIcon"></button>

      </div>
    </div>
    <div class="three" id="three">


      <div class="chat-con">
        <div class="space"></div>

        <!--message-->
        <div class="msg-rx">
          <div class="msg-content-rx">Hi! Open a group or contact to start the chat!</div>
        </div>
        <!--message-->
        <div class="msg-tx">
          <div class="msg-content-tx">.... our source code is <a href="https://github.com/flxn05/messenger" target="_blank" style="color: black; font-weight: bold;">[here]</a>. Feel free to <a href="mailto:get.giga.chat@gmail.com?subject=Contact Request from gigaCHAT user" style="color: black; font-weight: bold;">[contact the gigaCHAT team]</a> for support!</div>
        </div>
      
        <!--message-->
        <div class="msg-rx">
          <div class="msg-content-rx" style="max-width: 100%; line-height: 1.5rem;">
            Our developers:
            <br><br>
            <li>Jonathan Wallasch (Frontend)</li>
            <br>
            <li>David Ott (Backend)</li>
            <br>
            <li>Felix Nowak (UI/UX Design)</li>
            <br>
          </div>
        </div>
        <!--message-->
        <div class="msg-rx">
          <div class="msg-content-rx">Thank you for using gigaCHAT!</div>
        </div>

<!--message-->
<div class="msg-rx">
  <div class="voice-content-rx">
    <div class="voice-content-name">Name:</div>
    <div class="voice-content-controls">
      <img src="play.png" id="playVoiceMsg" onclick="playClicked()">
      <img src="pause.png" id="pauseVoiceMsg" onclick="pauseClicked()">
    </div>
    <div id="voice-content-waves">
            <div class="voiceBars" id="vB1"></div>
            <div class="voiceBars" id="vB2"></div>
            <div class="voiceBars" id="vB3"></div>
            <div class="voiceBars" id="vB4"></div>
            <div class="voiceBars" id="vB5"></div>
            <div class="voiceBars" id="vB6"></div>
            <div class="voiceBars" id="vB7"></div>
            <div class="voiceBars" id="vB8"></div>
            <div class="voiceBars" id="vB9"></div>
            <div class="voiceBars" id="vB10"></div>
            <div class="voiceBars" id="vB11"></div>
            <div class="voiceBars" id="vB12"></div>
            <div class="voiceBars" id="vB13"></div>
            <div class="voiceBars" id="vB14"></div>
            <div class="voiceBars" id="vB15"></div>
            <div class="voiceBars" id="vB16"></div>
    </div>
  </div>
</div>

<!--message-->
<div class="msg-rx">
  <div class="msg-content-rx" style="line-height: 1.5rem;">Spoiler: Voice Messages, Media Upload and Notifications are coming soon to gigaCHAT!</div>
</div>
<!--message-->
<div class="msg-tx">
  <div class="media-tx">
    <div class="media-name">Name:</div>
    <img src="910205.png" id="media" class="media" onclick="mediaPreview()" alt="Error displaying media. Contact gigaCHAT developers."><!--#media-img [main img]-->

    <div class="media-description">This is an image.</div>
  </div>
</div>


<!--message-->
<div class="msg-tx">
  <div class="media-tx">
    <div class="media-name">Name:</div>
    <img src="microphone.png" id="media" class="media" onclick="mediaPreview()" alt="Error displaying media. Contact gigaCHAT developers."><!--#media-img [main img]-->

    <div class="media-description">This is an image.</div>
  </div>
</div>

      </div> <!--chat con-->
    </div> <!--three-->

    <div id="addMenu">

      <h1>Add to gigaCHAT</h1>
      <p>You can add members to a group.<br>For direct chats, just enter <i>one</i> user.</p>
    <section id="addGroup">

      <section id="groupNameSection">
        <label for="groupName">Chat name:</label>
        <input id="groupName">
        <p id="tooltipUserList">e.g. <i>"Joni and David"</i></p>
      </section>

      <section id="userListSection">
        <label for="userList">Users:</label>
        <input id="userList">
        <p id="tooltipUserList">
          e.g.<i> "Joni:David:Felix"</i><br>
          Seperate with colons [:], check spelling.<br>
          <span style="color: rgb(207, 19, 19);">Don't forget to add yourself!</span></p>
      </section>

      <section id="cancelCreate">
        <button id="cancelBtn" onclick="closeMenu()">Cancel</button>
        <button id="createBtn">Create</button>
      </section>

    </section>
    </div>

    <div id="uploadMenu">

      <h1>Upload Media</h1>
      <p>Choose what to upload.</p>
        <section id="uploadType">
          <div id="uploadCamera"><img src="camera.png"></div>
          <div id="uploadGallery"><img src="image.png"></div>
          <div id="uploadDocument"><img src="doc.svg"></div>
        </section>
        <input type="file" id="galleryInput" multiple accept="image/*,video/*" style="display:none;">
<div id="preview"></div>
<input type="file" id="documentInput" multiple style="display:none;">
<div id="documentPreview"></div>
        <section id="cancelCreate">
          <button id="cancelBtn" onclick="closeUploadMediaDialog()">Cancel</button>
          <button id="createBtn">Upload</button>
        </section>

    </div>

  </main>
  <script>
    document.getElementById("changeTheme").addEventListener("click", function () {
        const stylesheet = document.getElementById("themeStylesheet");


        if (stylesheet.getAttribute("href") === "m.whatsapp.css") {
            stylesheet.setAttribute("href", "m.signal.css");
        } else {
            stylesheet.setAttribute("href", "m.whatsapp.css");
        }
    });

    function reloadPage() {
    window.location.reload();
}

let addNewBtn = document.getElementById('addNewBtn');
let addMenu = document.getElementById('addMenu');
let cancelBtn = document.getElementById('cancelBtn');

let searchBtn = document.getElementById('searchIconCon');
let searchBar = document.getElementById('search-box');
let closeBtn = document.getElementById('closeIconCon');

function addNew() {
  addMenu.style.display = 'block';
  document.querySelector('.one').classList.add('unfocus');
  document.querySelector('.three').classList.add('unfocus');
  document.getElementById('nav').classList.add('unfocus');
}

function closeMenu() {
  addMenu.style.display = 'none';
  document.querySelector('.one').classList.remove('unfocus');
  document.querySelector('.three').classList.remove('unfocus');
  document.getElementById('nav').classList.remove('unfocus');
}

function openSearch() {
  searchBar.style.width = '66vw';
  searchBar.style.paddingBlock = '10px';
  searchBar.style.paddingInline = '12px';
  closeBtn.style.display = 'flex';
  searchBtn.style.display = 'none';
  searchBar.focus();
}

searchBar.addEventListener('input', function() {
    const query = this.value.toLowerCase();
    const items = document.querySelectorAll('#one .chat-box');

    items.forEach(item => {
        const itemText = item.textContent.toLowerCase();
        if (itemText.includes(query)) {
            item.style.display = '';
        } else {
            item.style.display = 'none';
        }
    });
});

function closeSearch() {
  searchBar.style.width= '0';
  searchBar.style.padding = '0';
  closeBtn.style.display = 'none';
  searchBtn.style.display = 'flex'
}



const startVoiceMsgBtn = document.getElementById('startVoiceMsg');

//change buttons (type/talk)
startVoiceMsgBtn.addEventListener('touchstart', () => {
    startVoiceMsgBtn.classList.add('recording');
});

startVoiceMsgBtn.addEventListener('touchend', () => {
    startVoiceMsgBtn.classList.remove('recording');
});

startVoiceMsgBtn.addEventListener('touchcancel', () => {
    startVoiceMsgBtn.classList.remove('recording');
});

//change buttons when writing
document.getElementById('text_input').addEventListener('input', function () {
    const textInputChange = document.getElementById('text_input').value.trim();
    const startVoiceMsg = document.getElementById('startVoiceMsg');
    const uploadMedia = document.getElementById('uploadMedia')
    const sendMsg = document.getElementById('send-msg');

    if (textInputChange !== '') {
        startVoiceMsg.style.display = 'none';
        uploadMedia.style.display = 'none';
        sendMsg.style.display = 'inline-block';
    } else {
        startVoiceMsg.style.display = 'inline-block';
        uploadMedia.style.display = 'inline-block';
        sendMsg.style.display = 'none';
    }
});


let playVoiceMsg = document.getElementById('playVoiceMsg');
let pauseVoiceMsg = document.getElementById('pauseVoiceMsg');
let soundWaves = document.getElementById('voice-content-waves');

function playClicked() {
  playVoiceMsg.style.display = 'none';
  pauseVoiceMsg.style.display = 'flex';
  soundWaves.style.opacity = '1';
  //add btn function :: playMedia
}

function pauseClicked() {
  pauseVoiceMsg.style.display = 'none';
  playVoiceMsg.style.display = 'flex';
  soundWaves.style.opacity = '0';
  //add btn function :: pauseMedia
}

// upload dialogue

let uploadDialog = document.getElementById('uploadMedia');
let uploadMenu = document.getElementById('uploadMenu');

function uploadMediaDialog() {
  uploadMenu.style.display = 'block';
}

function closeUploadMediaDialog() {
  uploadMenu.style.display = 'none';
}

// upload gallery

document.getElementById('uploadGallery').addEventListener('click', function () {
    // Klick auf den unsichtbaren Dateiauswahldialog
    document.getElementById('galleryInput').click();
});

document.getElementById('galleryInput').addEventListener('change', function (event) {
    const files = event.target.files; // Enthält alle ausgewählten Dateien
    const preview = document.getElementById('preview');
    preview.innerHTML = ''; // Vorschau zurücksetzen

    Array.from(files).forEach(file => {
        const reader = new FileReader();
        
        if (file.type.startsWith('image/')) {
            reader.onload = function (e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.width = '88vw';
                img.style.margin = '5px';
                preview.appendChild(img);
            };
            reader.readAsDataURL(file);
        } else if (file.type.startsWith('video/')) {
            // Video-Vorschau erstellen
            reader.onload = function (e) {
                const video = document.createElement('video');
                video.src = e.target.result;
                video.controls = true;
                video.style.width = '88vw';
                video.style.margin = '5px';
                preview.appendChild(video);
            };
            reader.readAsDataURL(file);
        }
    });
});

document.getElementById('uploadDocument').addEventListener('click', function () {
    // Klick auf den unsichtbaren Dateiauswahldialog
    document.getElementById('documentInput').click();
});

document.getElementById('documentInput').addEventListener('change', function (event) {
    const files = event.target.files; // Enthält alle ausgewählten Dateien
    const preview = document.getElementById('documentPreview');
    preview.innerHTML = ''; // Vorschau zurücksetzen

    Array.from(files).forEach(file => {
        const fileElement = document.createElement('div');
        fileElement.textContent = file.name; // Zeigt den Dateinamen an

        // Optional: Weitere Informationen anzeigen
        fileElement.innerHTML += `<br>Größe: ${file.size} Bytes`;

        preview.appendChild(fileElement);
    });
});



</script>
</body>
</html>
